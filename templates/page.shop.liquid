{% comment %}
  Shop Page Template - All Products Grid
  Displays all products in a 3-column grid with sticky header and footer reveal
{% endcomment %}

{% section 'header' %}

<main class="shop-page" id="shop-page">
  <div class="shop-hero">
    <div class="shop-hero-content">
      <h1 class="shop-title">ALL PRODUCTS</h1>
      <p class="shop-subtitle">Discover our complete collection of premium athletic wear designed for performance and style.</p>
    </div>
  </div>

  <div class="shop-container">
    <div class="shop-products-grid" id="shop-products-grid">
      {% assign all_products = collections.all.products %}
      {% if all_products.size > 0 %}
        {% for product in all_products %}
          <div class="shop-product-card" data-product-id="{{ product.id }}">
            <a href="{{ product.url }}" class="shop-product-link">
              <div class="shop-product-image">
                {% if product.featured_image %}
                  <img src="{{ product.featured_image | image_url: width: 600 }}" 
                       alt="{{ product.featured_image.alt | default: product.title }}"
                       loading="lazy">
                {% else %}
                  <div class="shop-product-placeholder">
                    <span>No Image</span>
                  </div>
                {% endif %}
                
                {% if product.compare_at_price > product.price %}
                  <span class="shop-product-tag shop-product-tag--sale">SALE</span>
                {% else %}
                  <span class="shop-product-tag shop-product-tag--new">NEW</span>
                {% endif %}
              </div>
              
              <div class="shop-product-info">
                <span class="shop-product-category">{{ product.type | default: 'PRODUCT' | upcase }}</span>
                <h3 class="shop-product-name">{{ product.title }}</h3>
                <div class="shop-product-price">
                  {% if product.compare_at_price > product.price %}
                    <span class="shop-price-sale">{{ product.price | money }}</span>
                    <span class="shop-price-compare">{{ product.compare_at_price | money }}</span>
                  {% else %}
                    <span class="shop-price-regular">{{ product.price | money }}</span>
                  {% endif %}
                </div>
              </div>
            </a>
          </div>
        {% endfor %}
      {% else %}
        <div class="shop-empty-state">
          <h2>No Products Found</h2>
          <p>Check back soon for new arrivals!</p>
        </div>
      {% endif %}
    </div>
  </div>
</main>

{% section 'footer' %}

<!-- Product data for JavaScript -->
<script id="shop-products-data" type="application/json">
{
  "products": [
    {% for product in all_products %}
      {
        "id": {{ product.id }},
        "title": {{ product.title | json }},
        "handle": {{ product.handle | json }},
        "price": {{ product.price | json }},
        "compare_at_price": {{ product.compare_at_price | json }},
        "url": {{ product.url | json }},
        "featured_image": {% if product.featured_image %}{{ product.featured_image | image_url: width: 600 | json }}{% else %}null{% endif %},
        "type": {{ product.type | json }},
        "available": {{ product.available | json }}
      }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
</script>